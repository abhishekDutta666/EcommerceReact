(this.webpackJsonpstore=this.webpackJsonpstore||[]).push([[0],{36:function(e,t,a){e.exports=a.p+"static/media/loading.8894b7d3.gif"},37:function(e,t,a){e.exports=a.p+"static/media/logo.7ac3ba3a.svg"},39:function(e,t,a){e.exports=a(73)},44:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(33),l=a.n(c),o=(a(44),a(1)),s=a(12);function u(){return r.a.createElement("section",{className:"section about-section"},r.a.createElement("h1",{className:"section-title"},"about us"),r.a.createElement("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Molestiae repudiandae architecto qui adipisci in officiis, aperiam sequi atque perferendis eos, autem maiores nisi saepe quisquam hic odio consectetur nobis veritatis quasi explicabo obcaecati doloremque? Placeat ratione hic aspernatur error blanditiis?"))}var i=a(16),m=a(13),p=a(15),d=a(2);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var E=r.a.createContext();function g(e){var t=e.id,a=e.image,n=e.title,c=e.price,l=e.amount,o=r.a.useContext(E),s=o.removeItem,u=o.increaseAmount,m=o.decreaseAmount;return r.a.createElement("article",{className:"cart-item"},r.a.createElement("img",{src:a,alt:n}),r.a.createElement("div",null,r.a.createElement("h4",null,n),r.a.createElement("h5",null,"$",c),r.a.createElement("button",{className:"cart-btn remove-btn",onClick:function(){s(t)}},"remove")),r.a.createElement("div",null,r.a.createElement("button",{className:"cart-btn amount-btn",onClick:function(){u(t)}},r.a.createElement(i.b,null)),r.a.createElement("p",{className:"item-amount"},l),r.a.createElement("button",{className:"cart-btn amount-btn",onClick:function(){m(t,l)}},r.a.createElement(i.a,null))))}function h(){return r.a.createElement("section",{className:"empty-cart section"},r.a.createElement("h2",null,"empty cart ..."),r.a.createElement(o.b,{to:"/products",className:"btn btn-primary"},"fill it"))}function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var y=r.a.createContext();function O(){var e=r.a.useContext(E),t=e.cart,a=e.total,n=r.a.useContext(y).user;return 0===t.length?r.a.createElement(h,null):r.a.createElement("section",{className:"cart-items section"},r.a.createElement("h2",null,"your cart"),t.map((function(e){return r.a.createElement(g,Object.assign({key:e.id},e))})),r.a.createElement("h2",null,"total : $",a),n.token?r.a.createElement(o.b,{to:"/checkout",className:"btn btn-primary btn-block"},"checkout"):r.a.createElement(o.b,{to:"/login",className:"btn btn-primary btn-block"},"login"))}var j=a(4),k=a.n(j),N=a(8),w=a(17),x=a(14),C=a.n(x),S="https://svelte-store-project-server.herokuapp.com";function P(){return(P=Object(N.a)(k.a.mark((function e(t){var a,n,r,c,l,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.total,r=t.items,c=t.stripeTokenId,l=t.userToken,e.next=3,C.a.post("".concat(S,"/orders"),{name:a,total:n,items:r,stripeTokenId:c},{headers:{Authorization:"Bearer ".concat(l)}}).catch((function(e){return console.log(e)}));case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=function(e){return P.apply(this,arguments)};var I=Object(w.injectStripe)((function(e){var t=r.a.useContext(E),a=t.cart,n=t.total,c=t.clearCart,l=r.a.useContext(y),o=l.user,u=l.showAlert,i=l.hideAlert,m=l.alert,p=Object(s.g)(),f=r.a.useState(""),b=Object(d.a)(f,2),g=b[0],v=b[1],O=r.a.useState(""),j=Object(d.a)(O,2),x=j[0],C=j[1],S=!g||m.show;function P(){return(P=Object(N.a)(k.a.mark((function t(r){var l,s,m;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u({msg:"submitting order... please wait!"}),r.preventDefault(),t.next=4,e.stripe.createToken().catch((function(e){return console.log(e)}));case 4:if(l=t.sent,console.log(l),!(s=l.token)){t.next=23;break}return C(""),m=s.id,t.next=12,D({name:g,total:n,items:a,stripeTokenId:m,userToken:o.token});case 12:if(!t.sent){t.next=20;break}return u({msg:"your order is complete"}),c(),p.push("/"),t.abrupt("return");case 20:u({msg:"there was an error with your order. please try again!",type:"danger"});case 21:t.next=25;break;case 23:i(),C(l.error.message);case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return 0===a.length?r.a.createElement(h,null):r.a.createElement("section",{className:"section form"},r.a.createElement("h2",{className:"section-title"},"checkout"),r.a.createElement("form",{className:"checkout-form"},r.a.createElement("h3",null,"order total : ",r.a.createElement("span",null," $",n)),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"name"},"your name"),r.a.createElement("input",{type:"text",id:"name",value:g,onChange:function(e){v(e.target.value)}})),r.a.createElement("div",{className:"stripe-input"},r.a.createElement("label",{htmlFor:"card-element"},"Credit or Debit Card"),r.a.createElement("p",{className:"stripe-info"},"Test using this credit card : ",r.a.createElement("span",null,"4242 4242 4242 4242"),r.a.createElement("br",null),"enter any 5 digits for the zip code",r.a.createElement("br",null),"enter any 3 digits for the CVC")),r.a.createElement(w.CardElement,{className:"card-element"}),x&&r.a.createElement("p",{className:"form-empty"},x),S?r.a.createElement("p",{className:"form-empty"},"please fill out name field"):r.a.createElement("button",{type:"submit",onClick:function(e){return P.apply(this,arguments)},className:"btn btn-primary btn-block"},"submit")))})),A=function(){return r.a.createElement(w.StripeProvider,{apiKey:"pk_test_u98wkoUC9x1zM28B8icCPH1y008TT9DFrS"},r.a.createElement(w.Elements,null,r.a.createElement(I,null)))};function T(){return r.a.createElement("section",{className:"error-page section"},r.a.createElement("div",{className:"error-container"},r.a.createElement("h1",null,"oops! it's a dead end"),r.a.createElement(o.b,{to:"/",className:"btn btn-primary"},"back home")))}function F(e){var t=e.children;return r.a.createElement("div",null,r.a.createElement("div",{className:"hero"},r.a.createElement("div",{className:"banner"},r.a.createElement("h1",null,"think, code, deploy"),r.a.createElement("p",null,"Embrace your choices - we do"),t)))}function q(e){var t=e.image,a=e.title,n=e.id,c=e.price;return r.a.createElement("article",{className:"product"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:t,alt:a}),r.a.createElement(o.b,{to:"products/".concat(n),className:"btn btn-primary product-link"},"details")),r.a.createElement("div",{className:"product-footer"},r.a.createElement("p",{className:"product-title"},a),r.a.createElement("p",{className:"product-price"},"$",c)))}function J(e){var t=e.title,a=e.products;return r.a.createElement("section",{className:"section"},r.a.createElement("h2",{className:"section-title"},t),r.a.createElement("div",{className:"products-center"},a.map((function(e){return r.a.createElement(q,Object.assign({},e,{key:e.id}))}))))}function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $(e){return e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{image:e.image.url})}))}var z=r.a.createContext();var B=a(36),M=a.n(B);function _(){return r.a.createElement("div",{className:"loading"},r.a.createElement("h2",null,"loading..."),r.a.createElement("img",{src:M.a,alt:"loading gif"}))}function H(){var e=r.a.useContext(z),t=e.loading,a=e.featured;return t?r.a.createElement(_,null):r.a.createElement(J,{title:"featured products",products:a})}function K(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(F,null,r.a.createElement(o.b,{to:"/products",className:"btn btn-primary btn-hero"},"our products")),r.a.createElement(H,null))}function U(){return(U=Object(N.a)(k.a.mark((function e(t){var a,n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,e.next=3,C.a.post("".concat(S,"/auth/local"),{identifier:a,password:n}).catch((function(e){return console.log(e)}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=function(e){return U.apply(this,arguments)};function G(){return(G=Object(N.a)(k.a.mark((function e(t){var a,n,r,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,r=t.username,e.next=3,C.a.post("".concat(S,"/auth/local/register"),{username:r,email:a,password:n}).catch((function(e){return console.log(e)}));case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=function(e){return G.apply(this,arguments)};function R(){var e=Object(s.g)(),t=r.a.useContext(y),a=t.userLogin,n=t.showAlert,c=t.alert,l=r.a.useState(""),o=Object(d.a)(l,2),u=o[0],i=o[1],m=r.a.useState(""),p=Object(d.a)(m,2),f=p[0],b=p[1],E=r.a.useState("default"),g=Object(d.a)(E,2),h=g[0],v=g[1],O=r.a.useState(!0),j=Object(d.a)(O,2),w=j[0],x=j[1],C=!u||!f||!h||c.show,S=function(){var t=Object(N.a)(k.a.mark((function t(r){var c,l,o,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n({msg:"accesing user data. please wait..."}),r.preventDefault(),!w){t.next=8;break}return t.next=5,V({email:u,password:f});case 5:c=t.sent,t.next=11;break;case 8:return t.next=10,Q({email:u,password:f,username:h});case 10:c=t.sent;case 11:c?(l=c.data,o=l.jwt,s=l.user.username,a({token:o,username:s}),n({msg:"you are logged in : ".concat(s,". shop away my friend!")}),e.push("/products")):n({msg:"there was an error. please try again...",type:"danger"});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("section",{className:"form section"},r.a.createElement("h2",{className:"section-title"},w?"sign in":"register"),r.a.createElement("form",{className:"login-form"},r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"email"},"email"),r.a.createElement("input",{type:"email",id:"email",value:u,onChange:function(e){return i(e.target.value)}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"password"},"password"),r.a.createElement("input",{type:"password",id:"password",value:f,onChange:function(e){return b(e.target.value)}})),!w&&r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{html:"username"},"username"),r.a.createElement("input",{type:"text",id:"username",value:h,onChange:function(e){return v(e.target.value)}})),C&&r.a.createElement("p",{className:"form-empty"},"please fill out all form fields"),!C&&r.a.createElement("button",{type:"submit",className:"btn btn-block btn-primary",onClick:S},"submit"),r.a.createElement("p",{className:"register-link"},w?"need to register?":"already a member?",r.a.createElement("button",{type:"button",onClick:function(){x((function(e){var t=!e;return v(t?"default":""),t}))}},"click here"))))}function W(){var e=r.a.useContext(z),t=e.loading,a=e.products;return t?r.a.createElement(_,null):r.a.createElement(J,{title:"our products",products:a})}function X(){var e=Object(s.h)().id,t=r.a.useContext(z).products,a=r.a.useContext(E).addToCart,n=t.find((function(t){return t.id===parseInt(e)})),c=Object(s.g)();if(0===t.length)return r.a.createElement("p",{className:"loading"},"loading data...");var l=n.image,o=n.title,u=n.price,i=n.description;return r.a.createElement("section",{className:"single-product"},r.a.createElement("img",{src:l,alt:o,className:"single-product-image"}),r.a.createElement("article",null,r.a.createElement("h1",null,o),r.a.createElement("h2",null,"$",u),r.a.createElement("p",null,i),r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(){a(n),c.push("/cart")}},"add to cart")))}var Y=a(37),Z=a.n(Y);function ee(){var e=r.a.useContext(E).cartItems;return r.a.createElement("div",{className:"cart-link-container"},r.a.createElement(o.b,{to:"/cart"},"cart"),r.a.createElement("span",{className:"cart-link-total"},e))}function te(){var e=r.a.useContext(y),t=e.user,a=e.userLogout,n=r.a.useContext(E).clearCart;return t.token?r.a.createElement("button",{onClick:function(){a(),n()},className:"login-btn"},"logout"):r.a.createElement(o.b,{to:"/login"},"login")}function ae(){var e=r.a.useContext(y).user;return r.a.createElement("header",{className:"header"},r.a.createElement("img",{src:Z.a,className:"logo",alt:"company logo"}),r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("div",null,r.a.createElement("li",null,r.a.createElement(o.b,{to:"/"},"home")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/about"},"about")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/products"},"products")),e.token&&r.a.createElement("li",null,r.a.createElement(o.b,{to:"/checkout"},"checkout"))),r.a.createElement("div",null,r.a.createElement("li",null,r.a.createElement(te,null)),r.a.createElement("li",null,r.a.createElement(ee,null))))))}function ne(){var e=r.a.useContext(y),t=e.alert,a=e.hideAlert,n="alert-container";return t.show&&(n+=" alert-show","danger"===t.type&&(n+=" alert-danger")),r.a.createElement("div",{className:n},r.a.createElement("div",{className:"alert"},r.a.createElement("p",null,t.show&&t.msg),r.a.createElement("button",{className:"alert-close",onClick:a},r.a.createElement(i.c,null))))}var re=a(38);function ce(e){var t=e.children,a=Object(re.a)(e,["children"]),n=r.a.useContext(y).user;return r.a.createElement(s.b,Object.assign({},a,{render:function(){return n.token?t:r.a.createElement(s.a,{to:"/login"})}}))}var le=function(){return r.a.createElement(o.a,null,r.a.createElement(ne,null),r.a.createElement(ae,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/"},r.a.createElement(K,null)),r.a.createElement(s.b,{exact:!0,path:"/about"},r.a.createElement(u,null)),r.a.createElement(s.b,{exact:!0,path:"/cart"},r.a.createElement(O,null)),r.a.createElement(s.b,{exact:!0,path:"/login"},r.a.createElement(R,null)),r.a.createElement(ce,{path:"/checkout",name:"john"},r.a.createElement(A,null)),r.a.createElement(s.b,{exact:!0,path:"/products"},r.a.createElement(W,null)),r.a.createElement(s.b,{path:"/products/:id",children:r.a.createElement(X,null)}),r.a.createElement(s.b,{path:"*"},r.a.createElement(T,null))))};l.a.render(r.a.createElement((function(e){var t=e.children,a=r.a.useState(localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{username:null,token:null}),n=Object(d.a)(a,2),c=n[0],l=n[1],o=r.a.useState({show:!1,msg:"",type:"success"}),s=Object(d.a)(o,2),u=s[0],i=s[1];return r.a.createElement(y.Provider,{value:{user:c,userLogin:function(e){l(e),localStorage.setItem("user",JSON.stringify(e))},userLogout:function(){l({username:null,token:null}),localStorage.removeItem("user")},alert:u,showAlert:function(e){var t=e.msg,a=e.type;i({show:!0,msg:t,type:void 0===a?"success":a})},hideAlert:function(){i(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},u,{show:!1}))}}},t)}),null,r.a.createElement((function(e){var t=e.children,a=r.a.useState(!1),n=Object(d.a)(a,2),c=n[0],l=n[1],o=r.a.useState([]),s=Object(d.a)(o,2),u=s[0],i=s[1],m=r.a.useState([]),p=Object(d.a)(m,2),f=p[0],b=p[1];return r.a.useEffect((function(){l(!0),fetch("".concat(S,"/products")).then((function(e){return e.json()})).then((function(e){var t=$(e),a=t.filter((function(e){return!0===e.featured}));i(t),b(a),l(!1)}))}),[]),r.a.createElement(z.Provider,{value:{products:u,loading:c,featured:f}},t)}),null,r.a.createElement((function(e){var t=e.children,a=r.a.useState(localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[]),n=Object(d.a)(a,2),c=n[0],l=n[1],o=r.a.useState(0),s=Object(d.a)(o,2),u=s[0],i=s[1],m=r.a.useState(0),f=Object(d.a)(m,2),g=f[0],h=f[1];r.a.useEffect((function(){localStorage.setItem("cart",JSON.stringify(c));var e=c.reduce((function(e,t){return e+t.amount*t.price}),0);e=parseFloat(e.toFixed(2)),i(e);var t=c.reduce((function(e,t){return e+t.amount}),0);h(t)}),[c]);var v=function(e){l(Object(p.a)(c).filter((function(t){return t.id!==e})))},y=function(e){var t=Object(p.a)(c).map((function(t){return t.id===e?b({},t,{amount:t.amount+1}):b({},t)}));l(t)};return r.a.createElement(E.Provider,{value:{cart:c,cartItems:g,total:u,removeItem:v,increaseAmount:y,decreaseAmount:function(e,t){if(1!==t){var a=Object(p.a)(c).map((function(t){return t.id===e?b({},t,{amount:t.amount-1}):b({},t)}));l(a)}else v(e)},addToCart:function(e){var t=e.id,a=e.image,n=e.title,r=e.price;if(Object(p.a)(c).find((function(e){return e.id===t})))y(t);else{var o={id:t,image:a,title:n,price:r,amount:1},s=[].concat(Object(p.a)(c),[o]);l(s)}},clearCart:function(){l([])}}},t)}),null,r.a.createElement(le,null)))),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.b067fe76.chunk.js.map